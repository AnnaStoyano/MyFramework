{"version":3,"sources":["index.js"],"names":["App","SwitchCharacters","Search","DisplayResult","renderApp","document","querySelector","innerHTML","AddEventCharacter","CharactersResult","DisplayInfo","validateAndLoadData","window","currentState","characters","length","fetch","then","res","json","data","Promise","resolve","performDisplay","content","isDataLoading","error","currentDisplayCharacters","filterCharactersByWork","filter","item","name","toLowerCase","startsWith","currentSearch","charactersListItems","map","character","style","displayCharactersItem","top","getSecurityURL","image","join","displayCharacters","performDisplayCharacters","err","catch","switches","switchHTML","id","value","switchItem","currentCharacters","switchInput","switchLabel","switchWrapper","switchCharactersRadio","searchByName","characterName","trim","hogwartsStaff","characterList","addEventListener","target","characterTarget","closest","displayCharacterInfo","characterItem","find","getAttribute","display","species","gender","dateOfBirth","house","closeInfo","moreInfo","characterInfo","event","switchTarget","previousElementSibling","url","urlLetters","split","splice","module","hot","accept"],"mappings":"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","file":"MyFramework.a8914428.js","sourceRoot":"..","sourcesContent":["import style from './style.css';\n\nif (module.hot) {\n  module.hot.accept();\n}\n\nwindow.currentState = {\n  currentCharacters: 'all',\n  currentSearch: '',\n  isDataLoading: false,\n  error: null,\n  characters: [],\n  currentDisplayCharacters: [],\n};\n\nwindow.renderApp = renderApp;\nwindow.getSecurityURL = getSecurityURL;\nwindow.performDisplay = performDisplayCharacters;\nwindow.searchByName = searchByName;\nwindow.validateAndLoadData = validateAndLoadData;\n\nfunction App() {\n  return `<div>\n    ${SwitchCharacters()}\n    <br>\n    ${Search()}\n    <br>\n    ${DisplayResult()}\n    </div>`;\n}\n\nfunction renderApp() {\n  const appRoot = document.querySelector('#app-root');\n  appRoot.innerHTML = App();\n  AddEventCharacter();\n}\n\nrenderApp();\n\nfunction DisplayResult() {\n  return `<div>\n  ${CharactersResult()}\n  ${DisplayInfo()}\n  </div>`;\n}\n\nfunction validateAndLoadData() {\n  const API_URL = 'https://hp-api.herokuapp.com/api/characters';\n  if (window.currentState.characters.length <= 0) {\n    return fetch(API_URL)\n      .then(res => res.json())\n      .then(data => ({\n        data,\n      }));\n  }\n  return Promise.resolve(window.currentState.characters);\n}\n\nfunction CharactersResult() {\n  window.performDisplay();\n  let content = '';\n  if (window.currentState.isDataLoading) {\n    content = 'Data Loading...';\n  }\n\n  if (window.currentState.error != null) {\n    content = window.currentState.error;\n  }\n\n  if (window.currentState.characters.length > 0) {\n    window.currentState.currentDisplayCharacters = filterCharactersByWork().filter(item =>\n      item.name.toLowerCase().startsWith(window.currentState.currentSearch),\n    );\n    const charactersListItems = window.currentState.currentDisplayCharacters\n      .map(\n        character => `<li class='characterItem ${style.displayCharactersItem}' aria-label=\"${\n          character.name\n        }\">\n                        <div class='${style.top}'>\n                          <img src='${getSecurityURL(character.image)}'>\n                        </div>\n                        <p>${character.name}<p>\n                      </li>`,\n      )\n      .join('');\n\n    content = `<div id='displayCharacters' class='${style.displayCharacters}'>\n            <ul>${charactersListItems}</ul>\n            </div>`;\n  }\n\n  return content;\n}\n\nfunction performDisplayCharacters() {\n  window.currentState.isDataLoading = true;\n  window.currentState.error = null;\n  window\n    .validateAndLoadData()\n    .then(({ err, data }) => {\n      window.currentState.isDataLoading = false;\n\n      if (err) {\n        window.currentState.error = err;\n      } else if (data) {\n        window.currentState.characters = data;\n        window.renderApp();\n      }\n    })\n    .catch(() => {\n      window.currentState.error = 'ERROR';\n    });\n}\n\nfunction SwitchCharacters() {\n  const switches = [\n    {\n      id: 'switch-all',\n      value: 'all',\n    },\n    {\n      id: 'switch-students',\n      value: 'students',\n    },\n    {\n      id: 'switch-staff',\n      value: 'staff',\n    },\n  ];\n\n  const switchHTML = switches\n    .map(\n      switchItem => `<input type='radio' name='switchDisplay' value='${switchItem.value}' id='${\n        switchItem.id\n      }'\n    ${window.currentState.currentCharacters == switchItem.value ? 'checked' : ''} class='${\n        style.switchInput\n      }'>\n                                                    <label for='${switchItem.id}' class='${\n        style.switchLabel\n      }'>\n                                                    ${switchItem.value}\n                                                    </label>`,\n    )\n    .join('');\n  return `<div id='switch-wrapper' class='${style.switchWrapper}' onclick=\"(${switchCharactersRadio})(event);\"> ${switchHTML} </div>`;\n}\n\nfunction Search() {\n  return `<label for='search'>Enter name: </label><input type='text' id='search'\n            value='${window.currentState.currentSearch}' onchange='window.searchByName(this.value);'>`;\n}\n\nfunction searchByName(characterName) {\n  if (characterName != window.currentState.currentSearch) {\n    window.currentState.currentSearch = characterName.trim().toLowerCase();\n    window.renderApp();\n  }\n}\n\nfunction filterCharactersByWork() {\n  if (window.currentState.currentCharacters == 'staff') {\n    return window.currentState.characters.filter(character => character.hogwartsStaff == true);\n  } else if (window.currentState.currentCharacters == 'students') {\n    return window.currentState.characters.filter(character => character.hogwartsStaff == false);\n  } else {\n    return window.currentState.characters;\n  }\n}\n\nfunction AddEventCharacter() {\n  const characterList = document.querySelector('#displayCharacters ul');\n  if (characterList) {\n    characterList.addEventListener('click', function ({ target }) {\n      const characterTarget = target.closest('.characterItem');\n      if (characterTarget) {\n        displayCharacterInfo(characterTarget);\n      }\n    });\n  }\n}\n\nfunction displayCharacterInfo(character) {\n  const characterItem = window.currentState.currentDisplayCharacters.find(\n    item => item.name == character.getAttribute('aria-label'),\n  );\n  const display = document.querySelector('#moreInfo');\n  display.querySelector(`.top`).innerHTML = `<img src='${window.getSecurityURL(\n    characterItem.image,\n  )}'>`;\n  display.querySelector('.name').innerHTML = characterItem.name;\n  display.querySelector('.moreInfo').innerHTML = `Species: ${characterItem.species}<br>\n                                                    Gender: ${characterItem.gender}<br>\n                                                    Date of birth: ${characterItem.dateOfBirth}<br>\n                                                    House: ${characterItem.house}<br>`;\n  display.style = 'display: block';\n}\n\nfunction closeInfo(item) {\n  item.closest('#moreInfo').style.display = 'none';\n}\n\nwindow.closeInfo = closeInfo;\n\nfunction DisplayInfo() {\n  return `<div id='moreInfo' class='${style.moreInfo}'>\n            <div aria-label='' class='top ${style.top}'></div>\n            <p class='name ${style.characterName}'></p>\n            <p class='${style.characterInfo} moreInfo'></p>\n            <button onclick='(()=>window.closeInfo(this))()'>x</button>\n    </div>`;\n}\n\nfunction switchCharactersRadio(event) {\n  const switchTarget = event.target.previousElementSibling;\n  if (switchTarget && switchTarget.value != window.currentState.currentCharacters) {\n    window.currentState.currentCharacters = switchTarget.value;\n    window.renderApp();\n  }\n}\n\nfunction getSecurityURL(url) {\n  const urlLetters = url.split('');\n  urlLetters.splice(4, 0, 's');\n  return urlLetters.join('');\n}\n"]}